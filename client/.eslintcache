[{"C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\routes\\index.js":"1","C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\services\\api.service.js":"2"},{"size":2049,"mtime":1615470882311,"results":"3","hashOfConfig":"4"},{"size":13988,"mtime":1615471045215,"results":"5","hashOfConfig":"4"},{"filePath":"6","messages":"7","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1khmvc5",{"filePath":"8","messages":"9","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"10"},"C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\routes\\index.js",[],"C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\services\\api.service.js",["11","12","13","14","15"],"import { default as React, useContext, createContext, useState } from 'react';\r\nimport { Kid } from '../components';\r\n\r\nimport { apiConfig } from '../config';\r\n\r\nconst ApiContext = createContext();\r\nconst useApi = () => useContext(ApiContext);\r\n\r\nconst ApiProvider = ({children}) => {\r\n  // const BASE_URL = `${apiConfig.baseURL || \"http://localhost:8080\"}`;\r\n  const BASE_URL = \"https://open-poortje-api.herokuapp.com\";\r\n\r\n  const [ user, setUser ] = useState(JSON.parse(sessionStorage.getItem('user')));\r\n\r\n  const colors = {\r\n\t  'color-01': '#93B993',\r\n\t  'color-02': '#e06e6a',\r\n\t  'color-03': '#7ed5e5',\r\n\t  'color-04': '#E89BC4',\r\n  }\r\n\r\n  const setCookie =(name,value,days) => {\r\n    var expires = \"\";\r\n    if (days) {\r\n        var date = new Date();\r\n        date.setTime(date.getTime() + (days*24*60*60*1000));\r\n        expires = \"; expires=\" + date.toUTCString();\r\n    }\r\n    document.cookie = name + \"=\" + (value || \"\")  + expires + \"; path=/\";\r\n  }\r\n\r\n  const getCookie = (name) => {\r\n      var nameEQ = name + \"=\";\r\n      var ca = document.cookie.split(';');\r\n      for(var i=0;i < ca.length;i++) {\r\n          var c = ca[i];\r\n          while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n      }\r\n      return null;\r\n  }\r\n\r\n  const eraseCookie = (name) => {   \r\n      document.cookie = name +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n  }\r\n\r\n  const updateUserData = async () => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/${auth.role}`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    sessionStorage.setItem('user', JSON.stringify(response));\r\n\r\n    return response;\r\n  }\r\n\r\n  const updateSupervisorData = async () => {\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/supervisor`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    sessionStorage.setItem('supervisor', JSON.stringify(response.supervisor));\r\n    setUser(response);\r\n\r\n    return response;\r\n  }\r\n\r\n  const updateSelectedKidData = async (id) => {\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/supervisor/kid/${id || JSON.parse(sessionStorage.getItem('selected-kid'))._id}`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n    console.log(response);\r\n\r\n    sessionStorage.setItem('selected-kid', JSON.stringify(response.kid));\r\n    setUser(response);\r\n\r\n    return response;\r\n  }\r\n\r\n  const getKidsOfOrganisation = async ( role='supervisor' ) => {\r\n    const auth = (role === 'supervisor') ? JSON.parse(getCookie('sup-auth')) : JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/${role}/kids`;\r\n    \r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const getSupervisorsOfOrganisation = async () => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisors`;\r\n    \r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editKid = async ( kidId, changes ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid`;\r\n\r\n    const body = {\r\n      id: kidId,\r\n      changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editAuthKid = async ( kidId, changes ) => {\r\n    console.log(kidId, changes)\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid/auth`;\r\n\r\n    const body = {\r\n      id: kidId,\r\n      authUpdate: changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const newKid = async ( kid ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid`;\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body: JSON.stringify(kid),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const deleteKid = async ( kidId ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid`;\r\n\r\n    const options = {\r\n      method:'DELETE',\r\n      body: JSON.stringify({id: kidId}),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const newSupervisor = async ( supervisor ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor`;\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body: JSON.stringify(supervisor),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editSupervisor = async ( supervisorId, changes ) => {\r\n    console.log(supervisorId, changes)\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor`;\r\n\r\n    const body = {\r\n      id: supervisorId,\r\n      changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editAuthSupervisor = async ( supervisorId, changes ) => {\r\n    console.log(supervisorId, changes)\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor/auth`;\r\n\r\n    const body = {\r\n      id: supervisorId,\r\n      authUpdate: changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const deleteSupervisor = async ( supervisorId ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor`;\r\n\r\n    const options = {\r\n      method:'DELETE',\r\n      body: JSON.stringify({id: supervisorId}),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  \r\n  const getFicheTypes = async () => {\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/supervisor/fichetypes`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n  const getKidFicheTypes = async () => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/kid/fichetypes`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const saveMountainFiche = async ( question1, question2, positionById, kidId, screenshot ) => {\r\n    // save screenshot \r\n    const pictureName = await saveScreenshot(screenshot);\r\n\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/kid/fiche`;\r\n\r\n    const body = {\r\n      kidId: kidId,\r\n      fiche: {\r\n        fiche_type: \"601a996b352c1d313cd7bca2\",\r\n        picture_name: pictureName,\r\n        fiche_data:{\r\n          vraag1: question1,\r\n          vraag2: question2,\r\n          positionById: positionById\r\n        }\r\n      }\r\n    }\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body:JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const updateMountainFiche = async ( fiches, kidId, newFiche, positionById ) => {\r\n    const newFiches = fiches.map((fiche) => {\r\n      if (fiche.fiche_data != undefined && fiche.fiche_data.positionById === positionById) {\r\n        return newFiche;\r\n      }\r\n      return fiche;\r\n    })\r\n    return editKid(kidId, {fiches: newFiches});\r\n  }\r\n\r\n  const saveDialogFiche = async ( questionBlue, questionYellow, questionRed, kidId, screenshot ) => {\r\n    // save screenshot \r\n    const pictureName = await saveScreenshot(screenshot);\r\n\r\n    // save fiche\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/kid/fiche`;\r\n\r\n    const body = {\r\n      kidId: kidId,\r\n      fiche: {\r\n        fiche_type: \"603e31d01b09a12647f1c244\",\r\n        picture_name: pictureName,\r\n        fiche_data:{\r\n          questionBlue: questionBlue,\r\n          questionYellow: questionYellow,\r\n          questionRed: questionRed\r\n        }\r\n      }\r\n    }\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body:JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const saveMoneyFiche = async ( moneyAmount, kidId, screenshot ) => {\r\n    // save screenshot \r\n    const pictureName = await saveScreenshot(screenshot);\r\n\r\n    // save fiche\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/kid/fiche`;\r\n\r\n    const body = {\r\n      kidId: kidId,\r\n      fiche: {\r\n        fiche_type: \"603e31d01b09a12647f1c244\",\r\n        picture_name: pictureName,\r\n        fiche_data:{\r\n          moneyAmount: moneyAmount,\r\n        }\r\n      }\r\n    }\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body:JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const saveScreenshot = async ( file, width = 800, height = 600 ) => {\r\n    const data = new FormData();\r\n    data.append('picture', file);\r\n    data.append('width', width);\r\n    data.append('height', height);\r\n\r\n    const url = `${BASE_URL}/fiche`;\r\n\r\n    const options = {\r\n      method:'POST',\r\n      headers: {\r\n        // 'content-type': 'multipart/form-data'\r\n        }, \r\n      body: data,\r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n    console.log(response)\r\n    return response.filename;\r\n  }\r\n\r\n  const getUrl = (route) => {\r\n    return BASE_URL + route;\r\n  }\r\n\r\n\r\n  return (\r\n    <ApiContext.Provider value={{ \r\n      user,\r\n      colors,\r\n      \r\n      setCookie,\r\n      getCookie,\r\n      eraseCookie,\r\n      updateUserData,\r\n      updateSelectedKidData,\r\n      updateSupervisorData,\r\n\r\n      getKidsOfOrganisation,\r\n      editKid,\r\n      editAuthKid,\r\n      newKid,\r\n      deleteKid,\r\n\r\n      getSupervisorsOfOrganisation,\r\n      newSupervisor,\r\n      editSupervisor,\r\n      editAuthSupervisor,\r\n      deleteSupervisor,\r\n\r\n      // fiches\r\n      getFicheTypes,\r\n      getKidFicheTypes,\r\n      saveMountainFiche,\r\n      saveDialogFiche,\r\n      updateMountainFiche,\r\n      saveMoneyFiche,\r\n\r\n      getUrl,\r\n     }}>\r\n      {children}\r\n    </ApiContext.Provider>\r\n  );\r\n};\r\n\r\nexport {\r\n  ApiContext,\r\n  ApiProvider,\r\n  useApi,\r\n}\r\n",{"ruleId":"16","severity":1,"message":"17","line":2,"column":10,"nodeType":"18","messageId":"19","endLine":2,"endColumn":13},{"ruleId":"16","severity":1,"message":"20","line":4,"column":10,"nodeType":"18","messageId":"19","endLine":4,"endColumn":19},{"ruleId":"21","severity":1,"message":"22","line":37,"column":29,"nodeType":"23","messageId":"24","endLine":37,"endColumn":31},{"ruleId":"21","severity":1,"message":"22","line":38,"column":33,"nodeType":"23","messageId":"24","endLine":38,"endColumn":35},{"ruleId":"21","severity":1,"message":"25","line":378,"column":28,"nodeType":"23","messageId":"24","endLine":378,"endColumn":30},"no-unused-vars","'Kid' is defined but never used.","Identifier","unusedVar","'apiConfig' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='."]