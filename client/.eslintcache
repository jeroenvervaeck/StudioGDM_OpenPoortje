[{"C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\routes\\index.js":"1","C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\services\\api.service.js":"2","C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\components\\mountain\\Dustbin.js":"3"},{"size":2049,"mtime":1615470882311,"results":"4","hashOfConfig":"5"},{"size":13988,"mtime":1615471045215,"results":"6","hashOfConfig":"5"},{"size":8702,"mtime":1615472477741,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1khmvc5",{"filePath":"10","messages":"11","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"12"},{"filePath":"13","messages":"14","errorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\routes\\index.js",[],"C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\services\\api.service.js",["15","16","17","18","19"],"import { default as React, useContext, createContext, useState } from 'react';\r\nimport { Kid } from '../components';\r\n\r\nimport { apiConfig } from '../config';\r\n\r\nconst ApiContext = createContext();\r\nconst useApi = () => useContext(ApiContext);\r\n\r\nconst ApiProvider = ({children}) => {\r\n  // const BASE_URL = `${apiConfig.baseURL || \"http://localhost:8080\"}`;\r\n  const BASE_URL = \"https://open-poortje-api.herokuapp.com\";\r\n\r\n  const [ user, setUser ] = useState(JSON.parse(sessionStorage.getItem('user')));\r\n\r\n  const colors = {\r\n\t  'color-01': '#93B993',\r\n\t  'color-02': '#e06e6a',\r\n\t  'color-03': '#7ed5e5',\r\n\t  'color-04': '#E89BC4',\r\n  }\r\n\r\n  const setCookie =(name,value,days) => {\r\n    var expires = \"\";\r\n    if (days) {\r\n        var date = new Date();\r\n        date.setTime(date.getTime() + (days*24*60*60*1000));\r\n        expires = \"; expires=\" + date.toUTCString();\r\n    }\r\n    document.cookie = name + \"=\" + (value || \"\")  + expires + \"; path=/\";\r\n  }\r\n\r\n  const getCookie = (name) => {\r\n      var nameEQ = name + \"=\";\r\n      var ca = document.cookie.split(';');\r\n      for(var i=0;i < ca.length;i++) {\r\n          var c = ca[i];\r\n          while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n      }\r\n      return null;\r\n  }\r\n\r\n  const eraseCookie = (name) => {   \r\n      document.cookie = name +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n  }\r\n\r\n  const updateUserData = async () => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/${auth.role}`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    sessionStorage.setItem('user', JSON.stringify(response));\r\n\r\n    return response;\r\n  }\r\n\r\n  const updateSupervisorData = async () => {\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/supervisor`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    sessionStorage.setItem('supervisor', JSON.stringify(response.supervisor));\r\n    setUser(response);\r\n\r\n    return response;\r\n  }\r\n\r\n  const updateSelectedKidData = async (id) => {\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/supervisor/kid/${id || JSON.parse(sessionStorage.getItem('selected-kid'))._id}`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n    console.log(response);\r\n\r\n    sessionStorage.setItem('selected-kid', JSON.stringify(response.kid));\r\n    setUser(response);\r\n\r\n    return response;\r\n  }\r\n\r\n  const getKidsOfOrganisation = async ( role='supervisor' ) => {\r\n    const auth = (role === 'supervisor') ? JSON.parse(getCookie('sup-auth')) : JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/${role}/kids`;\r\n    \r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const getSupervisorsOfOrganisation = async () => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisors`;\r\n    \r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editKid = async ( kidId, changes ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid`;\r\n\r\n    const body = {\r\n      id: kidId,\r\n      changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editAuthKid = async ( kidId, changes ) => {\r\n    console.log(kidId, changes)\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid/auth`;\r\n\r\n    const body = {\r\n      id: kidId,\r\n      authUpdate: changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const newKid = async ( kid ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid`;\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body: JSON.stringify(kid),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const deleteKid = async ( kidId ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/kid`;\r\n\r\n    const options = {\r\n      method:'DELETE',\r\n      body: JSON.stringify({id: kidId}),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const newSupervisor = async ( supervisor ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor`;\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body: JSON.stringify(supervisor),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editSupervisor = async ( supervisorId, changes ) => {\r\n    console.log(supervisorId, changes)\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor`;\r\n\r\n    const body = {\r\n      id: supervisorId,\r\n      changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const editAuthSupervisor = async ( supervisorId, changes ) => {\r\n    console.log(supervisorId, changes)\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor/auth`;\r\n\r\n    const body = {\r\n      id: supervisorId,\r\n      authUpdate: changes,\r\n    }\r\n\r\n    const options = {\r\n      method:'PATCH',\r\n      body: JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const deleteSupervisor = async ( supervisorId ) => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/organisation/supervisor`;\r\n\r\n    const options = {\r\n      method:'DELETE',\r\n      body: JSON.stringify({id: supervisorId}),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  \r\n  const getFicheTypes = async () => {\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/supervisor/fichetypes`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n  const getKidFicheTypes = async () => {\r\n    const auth = JSON.parse(getCookie('auth'));\r\n    const url = `${BASE_URL}/kid/fichetypes`;\r\n\r\n    const options = {\r\n      method:'GET',\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const saveMountainFiche = async ( question1, question2, positionById, kidId, screenshot ) => {\r\n    // save screenshot \r\n    const pictureName = await saveScreenshot(screenshot);\r\n\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/kid/fiche`;\r\n\r\n    const body = {\r\n      kidId: kidId,\r\n      fiche: {\r\n        fiche_type: \"601a996b352c1d313cd7bca2\",\r\n        picture_name: pictureName,\r\n        fiche_data:{\r\n          vraag1: question1,\r\n          vraag2: question2,\r\n          positionById: positionById\r\n        }\r\n      }\r\n    }\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body:JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const updateMountainFiche = async ( fiches, kidId, newFiche, positionById ) => {\r\n    const newFiches = fiches.map((fiche) => {\r\n      if (fiche.fiche_data != undefined && fiche.fiche_data.positionById === positionById) {\r\n        return newFiche;\r\n      }\r\n      return fiche;\r\n    })\r\n    return editKid(kidId, {fiches: newFiches});\r\n  }\r\n\r\n  const saveDialogFiche = async ( questionBlue, questionYellow, questionRed, kidId, screenshot ) => {\r\n    // save screenshot \r\n    const pictureName = await saveScreenshot(screenshot);\r\n\r\n    // save fiche\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/kid/fiche`;\r\n\r\n    const body = {\r\n      kidId: kidId,\r\n      fiche: {\r\n        fiche_type: \"603e31d01b09a12647f1c244\",\r\n        picture_name: pictureName,\r\n        fiche_data:{\r\n          questionBlue: questionBlue,\r\n          questionYellow: questionYellow,\r\n          questionRed: questionRed\r\n        }\r\n      }\r\n    }\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body:JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const saveMoneyFiche = async ( moneyAmount, kidId, screenshot ) => {\r\n    // save screenshot \r\n    const pictureName = await saveScreenshot(screenshot);\r\n\r\n    // save fiche\r\n    const auth = JSON.parse(getCookie('sup-auth'));\r\n    const url = `${BASE_URL}/kid/fiche`;\r\n\r\n    const body = {\r\n      kidId: kidId,\r\n      fiche: {\r\n        fiche_type: \"603e31d01b09a12647f1c244\",\r\n        picture_name: pictureName,\r\n        fiche_data:{\r\n          moneyAmount: moneyAmount,\r\n        }\r\n      }\r\n    }\r\n\r\n    const options = {\r\n      method:'POST',\r\n      body:JSON.stringify(body),\r\n      headers: new Headers({\r\n          'Authorization': 'Bearer '+ auth.token, \r\n          'Content-Type': 'application/json',\r\n        }), \r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n\r\n    return response;\r\n  }\r\n\r\n  const saveScreenshot = async ( file, width = 800, height = 600 ) => {\r\n    const data = new FormData();\r\n    data.append('picture', file);\r\n    data.append('width', width);\r\n    data.append('height', height);\r\n\r\n    const url = `${BASE_URL}/fiche`;\r\n\r\n    const options = {\r\n      method:'POST',\r\n      headers: {\r\n        // 'content-type': 'multipart/form-data'\r\n        }, \r\n      body: data,\r\n    }\r\n\r\n    const response = await fetch(url, options).then((result) => result.json());\r\n    console.log(response)\r\n    return response.filename;\r\n  }\r\n\r\n  const getUrl = (route) => {\r\n    return BASE_URL + route;\r\n  }\r\n\r\n\r\n  return (\r\n    <ApiContext.Provider value={{ \r\n      user,\r\n      colors,\r\n      \r\n      setCookie,\r\n      getCookie,\r\n      eraseCookie,\r\n      updateUserData,\r\n      updateSelectedKidData,\r\n      updateSupervisorData,\r\n\r\n      getKidsOfOrganisation,\r\n      editKid,\r\n      editAuthKid,\r\n      newKid,\r\n      deleteKid,\r\n\r\n      getSupervisorsOfOrganisation,\r\n      newSupervisor,\r\n      editSupervisor,\r\n      editAuthSupervisor,\r\n      deleteSupervisor,\r\n\r\n      // fiches\r\n      getFicheTypes,\r\n      getKidFicheTypes,\r\n      saveMountainFiche,\r\n      saveDialogFiche,\r\n      updateMountainFiche,\r\n      saveMoneyFiche,\r\n\r\n      getUrl,\r\n     }}>\r\n      {children}\r\n    </ApiContext.Provider>\r\n  );\r\n};\r\n\r\nexport {\r\n  ApiContext,\r\n  ApiProvider,\r\n  useApi,\r\n}\r\n","C:\\Users\\Jérôme\\Documents\\GitHub\\StudioGDM_openpoortje\\client\\src\\app\\components\\mountain\\Dustbin.js",["20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41"],{"ruleId":"42","severity":1,"message":"43","line":2,"column":10,"nodeType":"44","messageId":"45","endLine":2,"endColumn":13},{"ruleId":"42","severity":1,"message":"46","line":4,"column":10,"nodeType":"44","messageId":"45","endLine":4,"endColumn":19},{"ruleId":"47","severity":1,"message":"48","line":37,"column":29,"nodeType":"49","messageId":"50","endLine":37,"endColumn":31},{"ruleId":"47","severity":1,"message":"48","line":38,"column":33,"nodeType":"49","messageId":"50","endLine":38,"endColumn":35},{"ruleId":"47","severity":1,"message":"51","line":378,"column":28,"nodeType":"49","messageId":"50","endLine":378,"endColumn":30},{"ruleId":"42","severity":1,"message":"52","line":1,"column":38,"nodeType":"44","messageId":"45","endLine":1,"endColumn":46},{"ruleId":"42","severity":1,"message":"53","line":4,"column":16,"nodeType":"44","messageId":"45","endLine":4,"endColumn":24},{"ruleId":"42","severity":1,"message":"54","line":10,"column":18,"nodeType":"44","messageId":"45","endLine":10,"endColumn":25},{"ruleId":"42","severity":1,"message":"55","line":11,"column":8,"nodeType":"44","messageId":"45","endLine":11,"endColumn":33},{"ruleId":"42","severity":1,"message":"56","line":51,"column":14,"nodeType":"44","messageId":"45","endLine":51,"endColumn":21},{"ruleId":"42","severity":1,"message":"57","line":54,"column":19,"nodeType":"44","messageId":"45","endLine":54,"endColumn":26},{"ruleId":"47","severity":1,"message":"48","line":61,"column":23,"nodeType":"49","messageId":"50","endLine":61,"endColumn":25},{"ruleId":"47","severity":1,"message":"48","line":65,"column":42,"nodeType":"49","messageId":"50","endLine":65,"endColumn":44},{"ruleId":"47","severity":1,"message":"48","line":79,"column":54,"nodeType":"49","messageId":"50","endLine":79,"endColumn":56},{"ruleId":"47","severity":1,"message":"48","line":79,"column":89,"nodeType":"49","messageId":"50","endLine":79,"endColumn":91},{"ruleId":"47","severity":1,"message":"51","line":128,"column":30,"nodeType":"49","messageId":"50","endLine":128,"endColumn":32},{"ruleId":"47","severity":1,"message":"48","line":128,"column":76,"nodeType":"49","messageId":"50","endLine":128,"endColumn":78},{"ruleId":"42","severity":1,"message":"58","line":130,"column":13,"nodeType":"44","messageId":"45","endLine":130,"endColumn":19},{"ruleId":"47","severity":1,"message":"51","line":131,"column":35,"nodeType":"49","messageId":"50","endLine":131,"endColumn":37},{"ruleId":"47","severity":1,"message":"48","line":131,"column":80,"nodeType":"49","messageId":"50","endLine":131,"endColumn":82},{"ruleId":"42","severity":1,"message":"59","line":140,"column":9,"nodeType":"44","messageId":"45","endLine":140,"endColumn":22},{"ruleId":"47","severity":1,"message":"51","line":159,"column":34,"nodeType":"49","messageId":"50","endLine":159,"endColumn":36},{"ruleId":"47","severity":1,"message":"48","line":159,"column":80,"nodeType":"49","messageId":"50","endLine":159,"endColumn":82},{"ruleId":"47","severity":1,"message":"51","line":179,"column":34,"nodeType":"49","messageId":"50","endLine":179,"endColumn":36},{"ruleId":"47","severity":1,"message":"48","line":179,"column":118,"nodeType":"49","messageId":"50","endLine":179,"endColumn":120},{"ruleId":"60","severity":1,"message":"61","line":201,"column":10,"nodeType":"62","endLine":201,"endColumn":12,"suggestions":"63"},{"ruleId":"47","severity":1,"message":"48","line":210,"column":17,"nodeType":"49","messageId":"50","endLine":210,"endColumn":19},"no-unused-vars","'Kid' is defined but never used.","Identifier","unusedVar","'apiConfig' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","'setState' is defined but never used.","'Redirect' is defined but never used.","'useAuth' is defined but never used.","'setupTouchDNDCustomEvents' is defined but never used.","'canDrop' is assigned a value but never used.","'didDrop' is assigned a value but never used.","'vraag2' is assigned a value but never used.","'mountainPoint' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getKidFiches'. Either include it or remove the dependency array.","ArrayExpression",["64"],{"desc":"65","fix":"66"},"Update the dependencies array to be: [getKidFiches]",{"range":"67","text":"68"},[7136,7138],"[getKidFiches]"]